<div class="container calculator-container my-4 p-4 rounded shadow-sm w-75">
  <h3 class="text-center">EMI CALCULATOR FOR LOAN</h3>
  <hr />
  <app-slider-input
    label="Loan Amount"
    suffix="₹"
    [min]="0"
    [max]="20000000"
    [step]="50000"
    [model]="loanAmount"
    (modelChange)="loanAmount = $event"
    (valueChanged)="calculateEMI()"
    [sliderLabels]="[
      '0',
      '25L',
      '50L',
      '75L',
      '100L',
      '125L',
      '150L',
      '175L',
      '200L'
    ]"
  />

  <app-slider-input
    label="Interest Rate"
    suffix="%"
    [min]="5"
    [max]="20"
    [step]="0.1"
    [model]="interestRate"
    (modelChange)="interestRate = $event"
    (valueChanged)="calculateEMI()"
    [sliderLabels]="['5', '7.5', '10', '12.5', '15', '17.5', '20']"
  />

  <app-slider-input
    label="Loan Tenure"
    [suffix]="tenureUnit"
    [min]="0"
    [max]="tenureUnit === 'Yr' ? 30 : 360"
    [step]="tenureUnit === 'Yr' ? 1 : 12"
    [model]="loanTenure"
    (modelChange)="loanTenure = $event"
    (valueChanged)="calculateEMI()"
    [sliderLabels]="
      tenureUnit === 'Yr'
        ? ['0', '5', '10', '15', '20', '25', '30']
        : ['0', '60', '120', '180', '240', '300', '360']
    "
    [showTenureToggle]="true"
    [tenureUnit]="tenureUnit"
    (tenureUnitChange)="setTenureUnit($event)"
  />
  <hr class="m-0" />

  <div class="row text-center">
    <div class="col-md-6 col-sm-12">
      <div class="result-card p-3 rounded border">
        <p class="mt-2 m-0">Loan EMI</p>
        <strong class="fs-4">₹{{ emi | ceil }}</strong>
        <hr />
        <p class="mt-2 m-0">Total Interest</p>
        <strong class="fs-4"> ₹{{ totalInterest | ceil }}</strong>
        <hr />
        <p class="mt-2 m-0">Total Payment</p>
        <p class="m-0">(Principal + Interest)</p>
        <strong class="fs-4">₹{{ totalPayment | ceil }}</strong>
      </div>
    </div>
    <div class="col-md-6 col-sm-12">
      <div class="chart-container p-2">
        <p class="m-0 fw-bold">Break-up of Total Payment</p>
        <div class="loan-chart">
          <canvas #loanChart></canvas>
        </div>
        <div class="d-flex justify-content-center gap-4 mt-2 border row">
          <div class="col-lg-5 col-md-6 col-sm-12">
            <span class="legend-dot principal"></span>
            <span
              >Principal:
              {{ ((loanAmount / totalPayment) * 100).toFixed(1) }}%</span
            >
          </div>
          <div class="col-lg-5 col-md-6 col-sm-12">
            <span class="legend-dot interest"></span>
            <span
              >Interest:
              {{ ((totalInterest / totalPayment) * 100).toFixed(1) }}%</span
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
